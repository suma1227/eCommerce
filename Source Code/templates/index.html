<!doctype html>
<html lang="en">
<head>
    <title>Ecommerce Website</title>

    <meta charset="utf-8">
     <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

     <!-- Bootstrap CSS -->
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
          integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
          crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="stylesheet" href="../static/style.css">

<body>

    <div class="main-navbar shadow-sm sticky-top">
        <div class="top-navbar">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-3 my-auto d-none d-sm-none d-md-block d-lg-block">
                        <h5 class="brand-name"><span class="h3">eCommerce</span><span class="h6">.com</span></h5>
                    </div>
                    <div class="col-md-5 my-auto">
                        <form action="/">
                            <div class="input-group">

                                <input type="search" name="product_name" id="product_name" placeholder="Search Your Product" onchange="this.form.submit()" class="form-control"  />
                                <button class="btn bg-white" type="submit">
                                    <i class="fa fa-search"></i>
                                </button>
                            </div>
                        </form>
                    </div>
                    <div class="col-md-4 my-auto">
                        <ul class="nav justify-content-end">

                            <li class="nav-item">
                                <a class="nav-link" href="/login">
                                    <i class="fa fa-user"></i> Click here to Login
                                </a>
                            </li>

                        </ul>
                    </div>
                </div>

            </div>
        </div>

    </div>

  <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
          <ol class="carousel-indicators">
               <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
               <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
               <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
               <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
               <li data-target="#carouselExampleIndicators" data-slide-to="4"></li>
          </ol>
          <div class="carousel-inner">
               <div class="carousel-item active">
                    <img class="d-block w-100"
                         src="https://assets.myntassets.com/w_980,c_limit,fl_progressive,dpr_2.0/assets/images/2022/7/25/b656a7f4-4688-4997-bb7c-54b78793981e1658752386588-Western-Wear_Desk.jpg"
                         alt="1st slide">
               </div>
               <div class="carousel-item">
                    <img class="d-block w-100"
                         src="https://assets.myntassets.com/w_980,c_limit,fl_progressive,dpr_2.0/assets/images/2022/6/27/53b4daed-cd2c-4111-86c5-14f737eceb351656325318973-Handbags_Desk.jpg"
                         alt="2nd slide">
               </div>
               <div class="carousel-item">
                    <img class="d-block w-100"
                         src="https://assets.myntassets.com/w_980,c_limit,fl_progressive,dpr_2.0/assets/images/2022/7/25/9be788ff-39a4-4214-99d0-fc97505aae5a1658752545685-USPA_Desk_Banner.jpg"
                         alt="3rd slide">
               </div>
               <div class="carousel-item">
                    <img class="d-block w-100"
                         src="https://assets.myntassets.com/w_980,c_limit,fl_progressive,dpr_2.0/assets/images/2022/7/25/179e278f-77ee-44c2-bf39-9f00b0cd08e01658752429301-Handbags_Desk.jpg"
                         alt="4th slide">
               </div>
               <div class="carousel-item">
                    <img class="d-block w-100"
                         src="https://assets.myntassets.com/w_980,c_limit,fl_progressive,dpr_2.0/assets/images/2022/5/31/4031994d-9092-4aa7-aea1-f52f2ae5194f1654006594976-Activewear_DK.jpg"
                         alt="5th slide">
               </div>
          </div>
     </div>

    <div class="row" id="products">
        {% for product in products: %}
            <div class="col-md-4 mt-3">
                <div class="card mt-1 p-2">
                    <div class="row">
                         <div class="col-md-6">
                            <img src="../static/products/{{product[3]}}" style="height:150px;overflow:auto;width:150px" class="text-center">
                            <div class="text-center"><b>{{product[1]}}</b></div>
                        </div>
                        <div class="col-md-6">
                            <span class="f-130 mt-10">{{product[2]}}</span> || <span class="f-130 mt-10">Colour : {{product[10]}}</span> ||
                            <span class="f-130 mt-10">{{product[8]}}</span>
                            <div class="f-130 mt-10"><span style="font-size: 13px">M.R.P</span> <span class="currentPrice"><b>₹ {{product[4]}}</b></span><span style="color: red">({{product[6]}} % off)</span> </div>
                            <div class="mt-10 f-110"><b>₹ {{product[7]}}</b></div>
                            <div class="row">
                                <div class="col-md-9">
                                     <div class="mt-10 f-110" style="font-size: 13px">Free Delivery</div>
                                </div>
                                {% if session['role']=='customer' %}
                                <div class="col-md-3 icon">
                                     <a href="wishlist_items?product_id={{product[0]}}" class="wishlist-icon" id="wishlist-icon">
                                        &#10084; <!-- Unicode heart symbol -->
                                    </a>
                                </div>
                                {% endif %}
                            </div>

                            <div class="mt-10 f-110 rating">{{product[9]}} *</div>

                            {% if session['role']=='customer' %}
                                    <form action="add_cart" method="post">
                                        <div>
                                            <input type="hidden" name="product_id" value="{{product[0]}}">
                                        </div>
                                         <div class="row mt-2">
                                             <div class="col-md-6 part-30 p-10 f-110">
                                                <input type="number" name="quantity" id="quantity" class="form-control" placeholder="Quantity"  min="1" max="{{product[5]}}">
                                             </div>
                                            <div class="col-md-6 part-50 p-10 f-110">
                                                <input type="submit" value="Add Cart" class="bg-success w-100 mt- login">
                                            </div>
                                        </div>

                                    </form>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
        <script>

        </script>
        <script src="../static/script.js"></script>
    </div>
</div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
<script>
$(document).ready(function(){
        view_products()
    $("#product_name").on("keyup",function(){

       view_products()
    });
});
    function view_products(){
        let product_name=$("#product_name").val()
        let url="view_products?product_name="+product_name+""
        $.get(url,function(data,status){
            $("#products").html(data)
        });
    }

</script>
</body>
</head>
</html>